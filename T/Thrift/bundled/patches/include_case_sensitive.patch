From 353f62f7a56c9d7757a6da87e3657607e88d42db Mon Sep 17 00:00:00 2001
From: Maarten Pronk <git@evetion.nl>
Date: Sun, 4 Sep 2022 17:15:59 +0200
Subject: [PATCH 1/2] Fix Shlwapi capitalization for Windows cross compile.

---
 lib/cpp/src/thrift/transport/THttpServer.cpp    | 2 +-
 lib/cpp/src/thrift/transport/TWebSocketServer.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/cpp/src/thrift/transport/THttpServer.cpp b/lib/cpp/src/thrift/transport/THttpServer.cpp
index 91a1c39afc..6fc2816748 100644
--- a/lib/cpp/src/thrift/transport/THttpServer.cpp
+++ b/lib/cpp/src/thrift/transport/THttpServer.cpp
@@ -25,7 +25,7 @@
 #include <thrift/transport/THttpServer.h>
 #include <thrift/transport/TSocket.h>
 #if defined(_MSC_VER) || defined(__MINGW32__)
-  #include <Shlwapi.h>
+  #include <shlwapi.h>
 #endif

 using std::string;
diff --git a/lib/cpp/src/thrift/transport/TWebSocketServer.h b/lib/cpp/src/thrift/transport/TWebSocketServer.h
index 7f39f36b95..2a3e076cf0 100644
--- a/lib/cpp/src/thrift/transport/TWebSocketServer.h
+++ b/lib/cpp/src/thrift/transport/TWebSocketServer.h
@@ -31,7 +31,7 @@
 #include <thrift/transport/TSocket.h>
 #include <thrift/transport/THttpServer.h>
 #if defined(_MSC_VER) || defined(__MINGW32__)
-#include <Shlwapi.h>
+#include <shlwapi.h>
 #define THRIFT_strncasecmp(str1, str2, len) _strnicmp(str1, str2, len)
 #define THRIFT_strcasestr(haystack, needle) StrStrIA(haystack, needle)
 #else

From 99897acf280c21a61a2ef8242c743906a514ab9b Mon Sep 17 00:00:00 2001
From: Maarten Pronk <git@evetion.nl>
Date: Sun, 4 Sep 2022 17:34:50 +0200
Subject: [PATCH 2/2] Also lowercase <windows.h>.

---
 lib/cpp/src/thrift/transport/TServerSocket.cpp | 2 +-
 lib/cpp/src/thrift/windows/Sync.h              | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/lib/cpp/src/thrift/transport/TServerSocket.cpp b/lib/cpp/src/thrift/transport/TServerSocket.cpp
index 25ec789e00..8dda1072b9 100644
--- a/lib/cpp/src/thrift/transport/TServerSocket.cpp
+++ b/lib/cpp/src/thrift/transport/TServerSocket.cpp
@@ -70,7 +70,7 @@
 // adds problematic macros like min() and max(). Try to work around:
 #define NOMINMAX
 #define WIN32_LEAN_AND_MEAN
-#include <Windows.h>
+#include <windows.h>
 #undef NOMINMAX
 #undef WIN32_LEAN_AND_MEAN
 #endif
diff --git a/lib/cpp/src/thrift/windows/Sync.h b/lib/cpp/src/thrift/windows/Sync.h
index a5b2ac50f0..26c69c60f4 100644
--- a/lib/cpp/src/thrift/windows/Sync.h
+++ b/lib/cpp/src/thrift/windows/Sync.h
@@ -37,7 +37,7 @@
 #define WIN32_LEAN_AND_MEAN
 #define _THRIFT_UNDEF_WIN32_LEAN_AND_MEAN
 #endif
-#include <Windows.h>
+#include <windows.h>
 #ifdef _THRIFT_UNDEF_NOMINMAX
 #undef NOMINMAX
 #undef _THRIFT_UNDEF_NOMINMAX
